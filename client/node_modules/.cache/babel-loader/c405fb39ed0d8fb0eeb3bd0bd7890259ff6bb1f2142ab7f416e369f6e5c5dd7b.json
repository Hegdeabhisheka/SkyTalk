{"ast":null,"code":"import { io } from 'socket.io-client';\nconst SOCKET_URL = 'http://localhost:4000';\nlet socket = null;\nexport const initSocket = () => {\n  const token = localStorage.getItem('accessToken');\n  if (!token) {\n    console.error('No token found for socket connection');\n    return null;\n  }\n  socket = io(SOCKET_URL, {\n    auth: {\n      token\n    },\n    reconnection: true,\n    reconnectionDelay: 1000,\n    reconnectionAttempts: 5\n  });\n  socket.on('connect', () => {\n    console.log('✅ Socket connected:', socket.id);\n  });\n  socket.on('disconnect', () => {\n    console.log('❌ Socket disconnected');\n  });\n  socket.on('connect_error', error => {\n    console.error('Socket connection error:', error);\n  });\n  return socket;\n};\nexport const getSocket = () => {\n  if (!socket) {\n    return initSocket();\n  }\n  return socket;\n};\nexport const disconnectSocket = () => {\n  if (socket) {\n    socket.disconnect();\n    socket = null;\n  }\n};\nconst socketService = {\n  initSocket,\n  getSocket,\n  disconnectSocket\n};\nexport default socketService;","map":{"version":3,"names":["io","SOCKET_URL","socket","initSocket","token","localStorage","getItem","console","error","auth","reconnection","reconnectionDelay","reconnectionAttempts","on","log","id","getSocket","disconnectSocket","disconnect","socketService"],"sources":["A:/projects/SkyTalk/client/src/services/socket.js"],"sourcesContent":["import { io } from 'socket.io-client';\r\n\r\nconst SOCKET_URL = 'http://localhost:4000';\r\n\r\nlet socket = null;\r\n\r\nexport const initSocket = () => {\r\n  const token = localStorage.getItem('accessToken');\r\n  \r\n  if (!token) {\r\n    console.error('No token found for socket connection');\r\n    return null;\r\n  }\r\n\r\n  socket = io(SOCKET_URL, {\r\n    auth: {\r\n      token\r\n    },\r\n    reconnection: true,\r\n    reconnectionDelay: 1000,\r\n    reconnectionAttempts: 5\r\n  });\r\n\r\n  socket.on('connect', () => {\r\n    console.log('✅ Socket connected:', socket.id);\r\n  });\r\n\r\n  socket.on('disconnect', () => {\r\n    console.log('❌ Socket disconnected');\r\n  });\r\n\r\n  socket.on('connect_error', (error) => {\r\n    console.error('Socket connection error:', error);\r\n  });\r\n\r\n  return socket;\r\n};\r\n\r\nexport const getSocket = () => {\r\n  if (!socket) {\r\n    return initSocket();\r\n  }\r\n  return socket;\r\n};\r\n\r\nexport const disconnectSocket = () => {\r\n  if (socket) {\r\n    socket.disconnect();\r\n    socket = null;\r\n  }\r\n};\r\n\r\nconst socketService = { initSocket, getSocket, disconnectSocket };\r\nexport default socketService;\r\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,MAAMC,UAAU,GAAG,uBAAuB;AAE1C,IAAIC,MAAM,GAAG,IAAI;AAEjB,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAC9B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;EAEjD,IAAI,CAACF,KAAK,EAAE;IACVG,OAAO,CAACC,KAAK,CAAC,sCAAsC,CAAC;IACrD,OAAO,IAAI;EACb;EAEAN,MAAM,GAAGF,EAAE,CAACC,UAAU,EAAE;IACtBQ,IAAI,EAAE;MACJL;IACF,CAAC;IACDM,YAAY,EAAE,IAAI;IAClBC,iBAAiB,EAAE,IAAI;IACvBC,oBAAoB,EAAE;EACxB,CAAC,CAAC;EAEFV,MAAM,CAACW,EAAE,CAAC,SAAS,EAAE,MAAM;IACzBN,OAAO,CAACO,GAAG,CAAC,qBAAqB,EAAEZ,MAAM,CAACa,EAAE,CAAC;EAC/C,CAAC,CAAC;EAEFb,MAAM,CAACW,EAAE,CAAC,YAAY,EAAE,MAAM;IAC5BN,OAAO,CAACO,GAAG,CAAC,uBAAuB,CAAC;EACtC,CAAC,CAAC;EAEFZ,MAAM,CAACW,EAAE,CAAC,eAAe,EAAGL,KAAK,IAAK;IACpCD,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;EAClD,CAAC,CAAC;EAEF,OAAON,MAAM;AACf,CAAC;AAED,OAAO,MAAMc,SAAS,GAAGA,CAAA,KAAM;EAC7B,IAAI,CAACd,MAAM,EAAE;IACX,OAAOC,UAAU,CAAC,CAAC;EACrB;EACA,OAAOD,MAAM;AACf,CAAC;AAED,OAAO,MAAMe,gBAAgB,GAAGA,CAAA,KAAM;EACpC,IAAIf,MAAM,EAAE;IACVA,MAAM,CAACgB,UAAU,CAAC,CAAC;IACnBhB,MAAM,GAAG,IAAI;EACf;AACF,CAAC;AAED,MAAMiB,aAAa,GAAG;EAAEhB,UAAU;EAAEa,SAAS;EAAEC;AAAiB,CAAC;AACjE,eAAeE,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}